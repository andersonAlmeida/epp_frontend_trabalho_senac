{"version":3,"sources":["webpack:///./src/helpers/integracao.js","webpack:///./src/views/pages/atracoes/Listar.vue?00f8","webpack:///src/views/pages/atracoes/Listar.vue","webpack:///./src/views/pages/atracoes/Listar.vue?10d7","webpack:///./src/views/pages/atracoes/Listar.vue"],"names":["integracao","api","token","localStorage","getItem","options","setHeaders","method","arguments","length","undefined","body","isLogin","headers","Headers","append","JSON","stringify","connect","url","fetch","then","x","status","removeItem","window","location","json","catch","error","console","log","message","login","getAtracoes","getAtracao","id","updateAtracao","salvaAtracao","deletaAtracao","getCategorias","getCategoria","updateCategoria","salvaCategoria","deletaCategoria","module","exports","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","attrs","lg","_l","item","_b","items","_s","nome","categoria","to","name","params","cod_atracao","on","click","removeAtracao","staticRenderFns","Listarvue_type_script_lang_js_","data","created","buscaAtracoes","methods","_this","integracao_default","a","atracoes","res","e","confirm","currentTarget","atracoes_Listarvue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/chunk-c8156500.80376fd3.js","sourcesContent":["const integracao = {\n\tapi: \"https://epp2019.herokuapp.com/cms\",\n\t// api: \"http://localhost:8000/cms\",\n\ttoken: localStorage.getItem(\"epp_adm_tk\"),\n\toptions: null,\n\n\tsetHeaders: (method = 'GET', body = null, isLogin = false) => {\n\t\tlet headers = new Headers();\n\t\theaders.append(\"Content-type\", \"application/json;charset=UTF-8\");\n\n\t\tif(!isLogin) {\n\t\t\theaders.append(\"Authorization\", \"Bearer \" + integracao.token);\n\t\t}\n\n\t\tintegracao.options = {\n\t\t\tmethod: method,\n\t\t\theaders: headers\n\t\t};\n\n\t\tif (body) {\n\t\t\tintegracao.options.body = JSON.stringify(body);\n\t\t}\n\t},\n\n\tconnect: (url, headers = {}) => {\n\t\treturn fetch(url, headers).then(x => {\n\n\t\t\tswitch( x.status ) {\n\t\t\t\t// se não é autorizado\n\t\t\t\tcase 401:\n\t\t\t\t\t// limpa o token salvo se existir\n\t\t\t\t\tlocalStorage.removeItem(\"epp_adm_tk\");\n\t\t\t\t\tlocalStorage.removeItem(\"epp_adm_name\");\n\t\t\t\t\tlocalStorage.removeItem(\"epp_adm_email\");\n\n\t\t\t\t\t// redireciona para a página de login\n\t\t\t\t\twindow.location = \"/login\";\n\t\t\t\tbreak\n\n\t\t\t\tcase 400:\n\t\t\t\t\twindow.location = \"/400\";\n\t\t\t\tbreak;\n\n\t\t\t\tcase 500:\n\t\t\t\t\twindow.location = \"/500\";\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn x.json()\n\t\t}).catch(error => console.log('An error ocurred in your fetch request: ' + error.message));\n\t},\n\n\t// Login\n\tlogin: () => {\n\t\treturn integracao.connect(integracao.api + \"/admin/login\", integracao.options);\n\t},\n\n\t// Atrações\n\tgetAtracoes: () => {\n\t\treturn integracao.connect(integracao.api + \"/atracao\", integracao.options);\n\t},\n\n\tgetAtracao: (id) => {\n\t\treturn integracao.connect(integracao.api + \"/atracao/\" + id, integracao.options);\n\t},\n\n\tupdateAtracao: (id) => {\n\t\treturn integracao.connect(integracao.api + \"/atracao/\" + id, integracao.options);\n\t},\n\n\tsalvaAtracao: () => {\n\t\treturn integracao.connect(integracao.api + \"/atracao/\", integracao.options);\n\t},\n\n\tdeletaAtracao: (id) => {\n\t\treturn integracao.connect(integracao.api + \"/atracao/\" + id, integracao.options);\n\t},\n\n\t// Categorias\n\tgetCategorias: () => {\n\t\treturn integracao.connect(integracao.api + \"/categoria\", integracao.options);\n\t},\n\n\tgetCategoria: (id) => {\n\t\treturn integracao.connect(integracao.api + \"/categoria/\" + id, integracao.options);\n\t},\n\n\tupdateCategoria: (id) => {\n\t\treturn integracao.connect(integracao.api + \"/categoria/\" + id, integracao.options);\n\t},\n\n\tsalvaCategoria: () => {\n\t\treturn integracao.connect(integracao.api + \"/categoria/\", integracao.options);\n\t},\n\n\tdeletaCategoria: (id) => {\n\t\treturn integracao.connect(integracao.api + \"/categoria/\" + id, integracao.options);\n\t},\n\n};\n\nmodule.exports = integracao;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"animated fadeIn\"},[_c('h2',[_vm._v(\"Atrações\")]),_c('b-row',[_c('b-col',{attrs:{\"lg\":\"12\"}},[_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-header\"},[_c('div',[_c('i',{staticClass:\"fa fa-align-justify\"}),_vm._v(\" Striped Table\\n          \")])]),_c('div',{staticClass:\"card-body\"},[_c('div',{staticClass:\"table-responsive-sm\"},[_c('table',{staticClass:\"table b-table table-striped\"},[_c('thead',[_c('th',[_vm._v(\"Nome\")]),_c('th',[_vm._v(\"Categoria\")]),_c('th',[_vm._v(\"Editar\")])]),_c('tbody',_vm._l((_vm.items),function(item){return _c('tr',_vm._b({},'tr',_vm.items,false),[_c('td',[_vm._v(_vm._s(item ? item.nome : ''))]),_c('td',[_vm._v(_vm._s(item ? item.categoria.nome : ''))]),_c('td',[_c('router-link',{staticClass:\"btn btn-primary\",attrs:{\"to\":{ name: 'Editar atração', params: {id: item.cod_atracao}}}},[_c('i',{staticClass:\"fa fa-pencil\"})]),_c('button',{staticClass:\"btn btn-danger\",attrs:{\"id\":item.cod_atracao},on:{\"click\":_vm.removeAtracao}},[_c('i',{staticClass:\"fa fa-close\"})])],1)])}),0)])])])])])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"animated fadeIn\">\r\n    <h2>Atrações</h2>\r\n    <b-row>\r\n      <b-col lg=\"12\">\r\n        <div class=\"card\">\r\n          <div class=\"card-header\">\r\n            <div>\r\n              <i class=\"fa fa-align-justify\"></i> Striped Table\r\n            </div>\r\n          </div>\r\n          <div class=\"card-body\">\r\n            <div class=\"table-responsive-sm\">\r\n              <table class=\"table b-table table-striped\">\r\n                <thead>\r\n                  <th>Nome</th>\r\n                  <th>Categoria</th>\r\n                  <th>Editar</th>\r\n                </thead>\r\n                <tbody>\r\n                  <tr v-bind=\"items\" v-for=\"item in items\">\r\n                    <td>{{item ? item.nome : ''}}</td>\r\n                    <td>{{item ? item.categoria.nome : ''}}</td>\r\n                    <td>                      \r\n                      <router-link :to=\"{ name: 'Editar atração', params: {id: item.cod_atracao}}\" class=\"btn btn-primary\"><i class=\"fa fa-pencil\"></i></router-link>\r\n                      <button class=\"btn btn-danger\" :id=\"item.cod_atracao\" @click=\"removeAtracao\">\r\n                        <i class=\"fa fa-close\"></i>\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </div>        \r\n      </b-col>\r\n    </b-row>\r\n    <!--/.row-->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// import cTable from '../../base/Table'\r\nimport api from \"../../../helpers/integracao\";\r\n\r\nexport default {\r\n  name: \"atracoes\",\r\n  data: () => {\r\n    return {\r\n      items: null\r\n    };\r\n  },\r\n  created() {    \r\n    this.buscaAtracoes();\r\n  },\r\n  methods: {\r\n    buscaAtracoes() {      \r\n      api.setHeaders();\r\n      let atracoes = api.getAtracoes();\r\n\r\n      atracoes.then(res => {\r\n        this.items = res;\r\n      });\r\n    },\r\n\r\n    removeAtracao(e) {\r\n      if( confirm(\"Você tem certeza que deseja excluir está atração?\") ) {        \r\n        api.setHeaders(\"DELETE\");\r\n        api.deletaAtracao(e.currentTarget.id);\r\n        // this.$router.go();\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Listar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Listar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Listar.vue?vue&type=template&id=4b719982&\"\nimport script from \"./Listar.vue?vue&type=script&lang=js&\"\nexport * from \"./Listar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}