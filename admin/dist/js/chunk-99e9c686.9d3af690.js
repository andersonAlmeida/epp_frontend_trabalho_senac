(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-99e9c686"],{"2e77":function(a,t){var o={api:"https://epp2019.herokuapp.com/cms",token:localStorage.getItem("epp_adm_tk"),options:null,setHeaders:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"GET",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new Headers;r.append("Content-type","application/json;charset=UTF-8"),e||r.append("Authorization","Bearer "+o.token),o.options={method:a,headers:r},t&&(o.options.body=JSON.stringify(t))},connect:function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(a,t).then(function(a){switch(a.status){case 401:localStorage.removeItem("epp_adm_tk"),localStorage.removeItem("epp_adm_name"),localStorage.removeItem("epp_adm_email"),window.location="/login";break;case 400:window.location="/400";break;case 500:window.location="/500";break}return a.json()}).catch(function(a){return console.log("An error ocurred in your fetch request: "+a.message)})},login:function(){return o.connect(o.api+"/admin/login",o.options)},getAtracoes:function(){return o.connect(o.api+"/atracao",o.options)},getAtracao:function(a){return o.connect(o.api+"/atracao/"+a,o.options)},updateAtracao:function(a){return o.connect(o.api+"/atracao/"+a,o.options)},salvaAtracao:function(){return o.connect(o.api+"/atracao/",o.options)},deletaAtracao:function(a){return o.connect(o.api+"/atracao/"+a,o.options)},getCategorias:function(){return o.connect(o.api+"/categoria",o.options)},getCategoria:function(a){return o.connect(o.api+"/categoria/"+a,o.options)},updateCategoria:function(a){return o.connect(o.api+"/categoria/"+a,o.options)},salvaCategoria:function(){return o.connect(o.api+"/categoria/",o.options)},deletaCategoria:function(a){return o.connect(o.api+"/categoria/"+a,o.options)}};a.exports=o},"7f7f":function(a,t,o){var e=o("86cc").f,r=Function.prototype,n=/^\s*function ([^ (]*)/,c="name";c in r||o("9e1e")&&e(r,c,{configurable:!0,get:function(){try{return(""+this).match(n)[1]}catch(a){return""}}})},f5e2:function(a,t,o){"use strict";o.r(t);var e=function(){var a=this,t=a.$createElement,o=a._self._c||t;return o("div",{staticClass:"animated fadeIn"},[o("b-row",[o("b-col",{attrs:{sm:"8"}},[o("b-card",[o("form",{attrs:{action:"",method:"post",enctype:"multipart/form-data"},on:{submit:function(t){return t.preventDefault(),a.atualizaAtracao(t)}}},[o("div",{attrs:{slot:"header"},slot:"header"},[o("strong",[a._v("Editar atração")])]),o("b-row",[o("b-col",{attrs:{sm:"6"}},[o("b-form-group",[o("label",{attrs:{for:"nome"}},[a._v("Nome")]),o("b-form-input",{attrs:{type:"text",id:"nome",name:"nome",value:a.atracao.nome},model:{value:a.atracao.nome,callback:function(t){a.$set(a.atracao,"nome",t)},expression:"atracao.nome"}})],1)],1),o("b-col",{attrs:{sm:"6"}},[o("b-form-group",[o("label",{attrs:{for:"categoria"}},[a._v("Categoria")]),o("select",{staticClass:"form-control custom-select",attrs:{name:"cod_atracao_categoria",id:"categoria"},domProps:{value:a.atracao.cod_atracao_categoria}},[o("option",{attrs:{value:""}},[a._v("Selecione")]),a._l(a.categorias,function(t){return o("option",{domProps:{value:t.cod_atracao_categoria}},[a._v(a._s(t.nome))])})],2)])],1)],1),o("b-form-group",[o("label",{attrs:{for:"descricao"}},[a._v("Descrição")]),o("b-form-textarea",{attrs:{type:"text",id:"descricao",rows:"10",name:"descricao",value:a.atracao.descricao},model:{value:a.atracao.descricao,callback:function(t){a.$set(a.atracao,"descricao",t)},expression:"atracao.descricao"}})],1),o("b-form-group",[o("label",{attrs:{for:"endereco"}},[a._v("Endereço")]),o("b-form-input",{attrs:{type:"text",id:"endereco",name:"endereco",value:a.atracao.endereco}})],1),o("b-row",[o("b-col",{attrs:{sm:"4"}},[o("b-form-group",[o("label",{attrs:{for:"inicio"}},[a._v("Data de início")]),o("b-form-input",{attrs:{type:"date",id:"inicio",name:"data_inicio",value:a.atracao.data_inicio}})],1)],1),o("b-col",{attrs:{sm:"4"}},[o("b-form-group",[o("label",{attrs:{for:"final"}},[a._v("Data de encerramento")]),o("b-form-input",{attrs:{type:"date",id:"final",name:"data_fim",value:a.atracao.data_fim}})],1)],1)],1),o("b-row",[o("b-col",{attrs:{sm:"4"}},[o("b-form-group",[o("label",{attrs:{for:"lat"}},[a._v("Lat")]),o("b-form-input",{attrs:{type:"text",id:"lat",name:"lat",value:a.atracao.lat}})],1)],1),o("b-col",{attrs:{sm:"4"}},[o("b-form-group",[o("label",{attrs:{for:"lng"}},[a._v("Lng")]),o("b-form-input",{attrs:{type:"text",id:"lng",name:"lng",value:a.atracao.lng}})],1)],1)],1),o("b-row",[o("b-col",{attrs:{sm:"12"}},[o("b-form-group",[o("label",{attrs:{for:"imagem"}},[a._v("Imagem")]),o("input",{staticClass:"form-control",attrs:{type:"file",name:"imagem",id:"imagem"}})])],1)],1),o("b-row",[o("b-col",{attrs:{sm:"12"}},[o("b-button",{attrs:{type:"submit",size:"sm",variant:"primary"}},[o("i",{staticClass:"fa fa-dot-circle-o"}),a._v(" Salvar\n              ")])],1)],1)],1)])],1)],1)],1)},r=[],n=(o("7f7f"),o("ac6a"),o("28a5"),o("2e77")),c=o.n(n),i={name:"nova_atracao",data:function(){return{atracao:null,categorias:null}},created:function(){this.buscaCategorias(),this.buscaAtracao()},methods:{buscaAtracao:function(){var a=this;c.a.setHeaders();var t=this.$route.params.id,o=c.a.getAtracao(t);o.then(function(t){t.data_inicio=t.data_inicio?t.data_inicio.split(" ")[0]:null,t.data_fim=t.data_fim?t.data_fim.split(" ")[0]:null,a.atracao=t})},buscaCategorias:function(){var a=this;c.a.setHeaders();var t=c.a.getCategorias();t.then(function(t){a.categorias=t})},atualizaAtracao:function(a){var t={};a.currentTarget.querySelectorAll("input, textarea, select").forEach(function(a){"date"==a.type?t[a.name]=a.value+" 00:00:00":t[a.name]=a.value}),c.a.setHeaders("PUT",t),c.a.updateAtracao(this.$route.params.id)}}},s=i,l=o("2877"),u=Object(l["a"])(s,e,r,!1,null,null,null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-99e9c686.9d3af690.js.map